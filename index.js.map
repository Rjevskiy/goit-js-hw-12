{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\n\n\nimport axios from 'axios';\n\nexport async function fetchImages(query, page = 1) {\n    const API_KEY = '46859112-8db04929d193e6e9d044d366e';\n    const BASE_URL = 'https://pixabay.com/api/';\n    const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${page}`;\n\n    const response = await axios.get(url);\n    if (response.status !== 200) {\n        throw new Error('Ошибка при получении данных');\n    }\n\n    return response.data.hits;\n}\n","export function displayImages(images, clear = false) {\n    const gallery = document.getElementById('gallery');\n    if (clear) gallery.innerHTML = ''; // Очищаем галерею, если clear = true\n\n    const markup = images.map(image => `\n        <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        </div>\n    `).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup); // Добавляем разметку к существующим элементам\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { displayImages } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst loader = document.getElementById('loader');\nconst loadMoreButton = document.getElementById('load-more');\nlet lightbox;\n\n// Глобальные переменные для отслеживания состояния поиска\nlet currentPage = 1;\nlet currentQuery = '';\n\n// Инициализация SimpleLightbox\nlightbox = new SimpleLightbox('.gallery-item a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\n// Функция для загрузки изображений\nasync function loadImages(query, page = 1) {\n    try {\n        loader.style.display = 'block';\n        const images = await fetchImages(query, page);\n\n        if (page === 1) {\n            displayImages(images, true); // Очищаем галерею при первом запросе\n        } else {\n            displayImages(images, false); // Добавляем изображения к существующим при загрузке доп. страниц\n        }\n\n        lightbox.refresh();\n        loadMoreButton.style.display = images.length === 15 ? 'block' : 'none'; // Показ кнопки только если есть еще изображения\n\n    } catch (error) {\n        iziToast.error({\n            title: \"Error\",\n            message: \"Failed to fetch images. Please try again later.\",\n            position: 'topRight'\n        });\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n\n// Обработчик формы\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const query = input.value.trim();\n\n    if (!query) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search query!\",\n            position: 'topRight'\n        });\n        return;\n    }\n\n    currentQuery = query;\n    currentPage = 1;\n    loadMoreButton.style.display = 'none'; // Скрываем кнопку перед загрузкой\n    loadImages(currentQuery, currentPage);\n});\n\n// Обработчик для кнопки \"Load More\"\nloadMoreButton.addEventListener('click', () => {\n    currentPage += 1;\n    loadImages(currentQuery, currentPage);\n});\n"],"names":["fetchImages","query","page","url","response","axios","displayImages","images","clear","gallery","markup","image","form","input","loader","loadMoreButton","lightbox","currentPage","currentQuery","SimpleLightbox","loadImages","iziToast","event"],"mappings":"owBAKO,eAAeA,EAAYC,EAAOC,EAAO,EAAG,CAG/C,MAAMC,EAAM,qEAAgCF,CAAK,6EAA6EC,CAAI,GAE5HE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,6BAA6B,EAGjD,OAAOA,EAAS,KAAK,IACzB,CChBO,SAASE,EAAcC,EAAQC,EAAQ,GAAO,CACjD,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC7CD,IAAOC,EAAQ,UAAY,IAE/B,MAAMC,EAASH,EAAO,IAAII,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,4BAGtCA,EAAM,KAAK;AAAA,4BACXA,EAAM,KAAK;AAAA,+BACRA,EAAM,QAAQ;AAAA,gCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAG1C,EAAE,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,CAClD,CCZA,MAAME,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAQ,SAAS,eAAe,cAAc,EAC9CC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAiB,SAAS,eAAe,WAAW,EAC1D,IAAIC,EAGAC,EAAc,EACdC,EAAe,GAGnBF,EAAW,IAAIG,EAAe,kBAAmB,CAC7C,SAAU,GACV,aAAc,MACd,aAAc,GAClB,CAAC,EAGD,eAAeC,EAAWnB,EAAOC,EAAO,EAAG,CACvC,GAAI,CACAY,EAAO,MAAM,QAAU,QACvB,MAAMP,EAAS,MAAMP,EAAYC,EAAOC,CAAI,EAExCA,IAAS,EACTI,EAAcC,EAAQ,EAAI,EAE1BD,EAAcC,EAAQ,EAAK,EAG/BS,EAAS,QAAO,EAChBD,EAAe,MAAM,QAAUR,EAAO,SAAW,GAAK,QAAU,MAEnE,MAAe,CACZc,EAAS,MAAM,CACX,MAAO,QACP,QAAS,kDACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNP,EAAO,MAAM,QAAU,MAC1B,CACL,CAGAF,EAAK,iBAAiB,SAAWU,GAAU,CACvCA,EAAM,eAAc,EACpB,MAAMrB,EAAQY,EAAM,MAAM,KAAI,EAE9B,GAAI,CAACZ,EAAO,CACRoB,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,+BACT,SAAU,UACtB,CAAS,EACD,MACH,CAEDH,EAAejB,EACfgB,EAAc,EACdF,EAAe,MAAM,QAAU,OAC/BK,EAAWF,EAAcD,CAAW,CACxC,CAAC,EAGDF,EAAe,iBAAiB,QAAS,IAAM,CAC3CE,GAAe,EACfG,EAAWF,EAAcD,CAAW,CACxC,CAAC"}